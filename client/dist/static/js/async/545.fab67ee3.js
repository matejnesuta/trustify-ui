"use strict";(self.webpackChunk_trustify_ui_client=self.webpackChunk_trustify_ui_client||[]).push([["545"],{46173:function(e,l,i){i.d(l,{L:()=>u,c:()=>m});var t=i(32909),n=i(42642),s=i(62540),r=i(63696),a=i(98259),o=i(71284);i(1480);var d=i(73470),c=i(30111);let u=r.createContext({}),m=e=>{var l;let{children:i}=e,[m,h]=r.useState(""),[p,x]=r.useState("");r.useEffect(()=>{let e=setTimeout(()=>{x(m)},400);return()=>clearTimeout(e)},[m]);let{labels:b}=(0,c._P)(p),_=(0,d.MM)({tableName:"sbom",persistenceKeyPrefix:a.rt.sboms,persistTo:"urlParams",columnNames:{name:"Name",version:"Version",supplier:"Supplier",labels:"Labels",published:"Created on",packages:"Dependencies",vulnerabilities:"Vulnerabilities"},isPaginationEnabled:!0,isSortEnabled:!0,sortableColumns:["name","published"],isFilterEnabled:!0,filterCategories:[{categoryKey:a._G,title:"Filter text",placeholderText:"Search",type:"search"},{categoryKey:"published",title:"Created on",type:"dateRange"},{categoryKey:"labels",title:"Label",type:"autocompleteLabel",placeholderText:"Filter results by label",selectOptions:b.map(e=>{let l=(0,o.m4)({key:e.key,value:e.value});return{value:l,label:l}}),onInputValueChange:h}],isExpansionEnabled:!1}),{result:{data:j,total:y},isFetching:f,fetchError:g}=(0,c.i$)((0,d.Ng)((0,n._)((0,t._)({},_),{hubSortFieldKeys:{name:"name",published:"published"}})),(null!=(l=_.filterState.filterValues.labels)?l:[]).map(e=>(0,o.Cb)(e))),v=(0,d.PB)((0,n._)((0,t._)({},_),{idProperty:"id",currentPageItems:j,totalItemCount:y,isLoading:f}));return(0,s.jsx)(u.Provider,{value:{totalItemCount:y,isFetching:f,fetchError:g,tableControls:v},children:i})}},74466:function(e,l,i){i.d(l,{Y:()=>V});var t=i(32909),n=i(42642),s=i(62540),r=i(63696),a=i(74343),o=i(38927),d=i(80057),c=i(13021),u=i(24773),m=i(26917),h=i(16646),p=i(21758),x=i(40384),b=i(28516),_=i(78517),j=i(62101),y=i(71284),f=i(89705),g=i(12852),v=i(4392),T=i(93826),C=i(30448),K=i(98259),k=i(99528),S=i(30111),P=i(52362),E=i(23909),w=i(98345),L=i(6160),D=i(24296),F=i(92107),B=i(15461),I=i(3652);let N=e=>{let{sbomId:l}=e,{data:i,isFetching:t,fetchError:n}=(0,I.UI)(l);return(0,s.jsx)(D.a,{isFetching:t,fetchError:n,isFetchingState:(0,s.jsx)(L.E,{screenreaderText:"Loading contents"}),fetchErrorState:e=>(0,s.jsx)(F.D,{error:e}),children:(0,s.jsx)(B.n,{severities:i.summary.vulnerabilityStatus.affected.severities})})};var O=i(46173);let V=()=>{let{pushNotification:e}=r.useContext(v.K),{isFetching:l,fetchError:i,totalItemCount:L,tableControls:D}=r.useContext(O.L),[F,B]=r.useState(null),I=null!==F,{numRenderedColumns:V,currentPageItems:M,propHelpers:{paginationProps:U,tableProps:J,getThProps:G,getTrProps:R,getTdProps:$},expansionDerivedState:{isCellExpanded:A},filterState:{filterValues:H,setFilterValues:W}}=D,{downloadSBOM:Y,downloadSBOMLicenses:Z}=(0,k.m)(),q=()=>{B(null)},[z,X]=r.useState(null),{mutate:Q,isPending:ee}=(0,S.l6)(l=>{X(null),e({title:(0,K.B7)(l),variant:"success"})},l=>{e({title:(0,K.Ut)(l),variant:"danger"})});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(m.X,(0,n._)((0,t._)({},J),{"aria-label":"sbom-table",children:[(0,s.jsx)(h.d,{children:(0,s.jsx)(p.Tr,{children:(0,s.jsxs)(C.Ze,(0,n._)((0,t._)({},D),{children:[(0,s.jsx)(x.Th,(0,t._)({},G({columnKey:"name"}))),(0,s.jsx)(x.Th,(0,t._)({},G({columnKey:"version"}))),(0,s.jsx)(x.Th,(0,t._)({},G({columnKey:"supplier"}))),(0,s.jsx)(x.Th,(0,t._)({},G({columnKey:"labels"}))),(0,s.jsx)(x.Th,(0,t._)({},G({columnKey:"published"}))),(0,s.jsx)(x.Th,(0,t._)({},G({columnKey:"packages"}))),(0,s.jsx)(x.Th,(0,t._)({},G({columnKey:"vulnerabilities"})))]}))})}),(0,s.jsx)(C.nJ,{isLoading:l,isError:!!i,isNoData:0===L,numRenderedColumns:V,children:M.map((e,l)=>(0,s.jsx)(b.N,{isExpanded:A(e),children:(0,s.jsx)(p.Tr,(0,n._)((0,t._)({},R({item:e})),{children:(0,s.jsxs)(C.Oi,(0,n._)((0,t._)({},D),{item:e,rowIndex:l,children:[(0,s.jsx)(_.Td,(0,n._)((0,t._)({width:20,modifier:"breakWord"},$({columnKey:"name",isCompoundExpandToggle:!0,item:e,rowIndex:l})),{children:(0,s.jsx)(a.k2,{to:(0,a.tW)(P.Jh.sbomDetails,{sbomId:e.id}),children:e.name})})),(0,s.jsx)(_.Td,(0,n._)((0,t._)({width:10,modifier:"truncate"},$({columnKey:"version"})),{children:e.described_by.map(e=>e.version).filter(e=>e).join(", ")})),(0,s.jsx)(_.Td,(0,n._)((0,t._)({width:10,modifier:"truncate"},$({columnKey:"supplier"})),{children:e.suppliers.join(", ")})),(0,s.jsx)(_.Td,(0,n._)((0,t._)({width:20,modifier:"truncate"},$({columnKey:"labels"})),{children:(0,s.jsx)(g.g,{value:e.labels,onClick:e=>{let{key:l,value:i}=e,s=(0,y.m4)({key:l,value:i}),r=H.labels;if(!(null==r?void 0:r.includes(s))){let e=r?[...r,s]:[s];W((0,n._)((0,t._)({},H),{labels:e}))}}})})),(0,s.jsx)(_.Td,(0,n._)((0,t._)({width:10,modifier:"truncate"},$({columnKey:"published"})),{children:(0,E.Yq)(e.published)})),(0,s.jsx)(_.Td,(0,n._)((0,t._)({width:10},$({columnKey:"packages"})),{children:e.number_of_packages})),(0,s.jsx)(_.Td,(0,n._)((0,t._)({width:20},$({columnKey:"vulnerabilities"})),{children:(0,s.jsx)(N,{sbomId:e.id})})),(0,s.jsx)(_.Td,{isActionCell:!0,children:(0,s.jsx)(j.G,{items:[{title:"Edit labels",onClick:()=>{B(e)}},{isSeparator:!0},{title:"Download SBOM",onClick:()=>{Y(e.id,"".concat(e.name,".json"))}},{title:"Download License Report",onClick:()=>{Z(e.id)}},{isSeparator:!0},{title:"Delete",onClick:()=>{X(e)}}]})})]}))}))},e.id))})]})),(0,s.jsx)(T.n,{idPrefix:"sbom-table",isTop:!1,paginationProps:U}),(0,s.jsxs)(o.a,{isOpen:I,variant:"medium",onClose:q,children:[(0,s.jsx)(d.r,{title:"Edit labels"}),(0,s.jsx)(c.c,{children:F&&(0,s.jsx)(w.f,{sbom:F,onClose:q})})]}),(0,s.jsx)(f.T,(0,n._)((0,t._)({},(0,K.zK)(z)),{inProgress:ee,titleIconVariant:"warning",isOpen:!!z,confirmBtnVariant:u.Ak.danger,confirmBtnLabel:"Delete",cancelBtnLabel:"Cancel",onCancel:()=>X(null),onClose:()=>X(null),onConfirm:()=>{z&&Q(z.id)}}))]})}},75725:function(e,l,i){i.d(l,{r:()=>b});var t=i(32909),n=i(42642),s=i(62540),r=i(63696),a=i(74343),o=i(61360),d=i(35048),c=i(32490),u=i(24773),m=i(1480),h=i(93826),p=i(52362),x=i(46173);let b=e=>{let{showFilters:l,showActions:i}=e,b=(0,a.Zp)(),{tableControls:_}=r.useContext(x.L),{propHelpers:{toolbarProps:j,filterToolbarProps:y,paginationToolbarItemProps:f,paginationProps:g}}=_;return(0,s.jsx)(o.M,(0,n._)((0,t._)({},j),{"aria-label":"sbom-toolbar",children:(0,s.jsxs)(d.P,{children:[l&&(0,s.jsx)(m.Us,(0,t._)({},y)),i&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.T,{children:(0,s.jsx)(u.$n,{variant:"primary",onClick:()=>b(p.Jh.sbomUpload),children:"Upload SBOM"})}),(0,s.jsx)(c.T,{children:(0,s.jsx)(u.$n,{variant:"secondary",onClick:()=>b(p.Jh.sbomScan),children:"Generate vulnerability report"})})]}),(0,s.jsx)(c.T,(0,n._)((0,t._)({},f),{children:(0,s.jsx)(h.n,{idPrefix:"sbom-table",isTop:!0,paginationProps:g})}))]})}))}}}]);